<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Giraffe - Barc's Backbone Framework</title>

    <!-- Stylesheets -->
    <link rel='stylesheet' type='text/css' href='css/style.css' />

    <!-- Scripts -->
    <!--[if lt IE 9]><script type="text/javascript" src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>
<body>
  <div id="page-wrapper">
    <div class="row">
      <!-- Sidebar -->
      <section id="sidebar" class="col sidebar">
        
        <h2><a href="index.html">Giraffe</a></h2>
<h2><a href="api.html">API</a></h2>
<h2>Examples</h2>
<ul>
<li><a href="viewBasics.html">View Basics</a></li>
<li><a href="lifecycleManagement.html">Lifecycle Management</a></li>
<li><a href="documentEvents.html">Document Events</a></li>
<li><a href="dataEvents.html">Data Events</a></li>
<li><a href="viewUI.html">View UI</a></li>
<li><a href="menuExample.html">Menu Examples</a></li>
<li><a href="viewFlexibility.html">View Flexibility</a></li>
<li><a href="routersAndAppEvents.html">Router and App Events</a></li>
<li><a href="templateStrategies.html">Template Strategies</a></li>
</ul>

      </section>

      <!-- Main Body -->
      <article id="content" class="col content">
        <img id="logo" src="img/logo.png" />
        <p><div class='section-example'><h2>Menu Example</h2>
<p>This advanced example demonstrates how you can use Giraffe&#39;s features to build a route-powered menu with cached content views that save their scroll position.</p>
<pre><code class="language-js"><span class="keyword">var</span> App, MenuView, MenuItemView, ContentView, ContentItemView;</code></pre>
<pre><code class="language-js">App = Giraffe.App.extend({
  initialize: <span class="keyword">function</span>() {
    <span class="keyword">this</span>.menuItems = <span class="keyword">new</span> Giraffe.Collection([
      {name: <span class="string">'menu item 1'</span>},
      {name: <span class="string">'menu item 2'</span>},
      {name: <span class="string">'menu item 3'</span>}
    ]);
  },

  afterRender: <span class="keyword">function</span>() {
    <span class="keyword">this</span>.attach(<span class="keyword">new</span> MenuView({collection: <span class="keyword">this</span>.menuItems}));
    <span class="keyword">this</span>.attach(<span class="keyword">new</span> ContentView({collection: <span class="keyword">this</span>.menuItems}));
  }
});</code></pre>
<pre><code class="language-js">MenuView = Giraffe.View.extend({
  initialize: <span class="keyword">function</span>() {

  },

  appEvents: {
    <span class="string">'route:menu'</span>: <span class="string">'onRouteMenu'</span>
  },

  onRouteMenu: <span class="keyword">function</span>(menuItemName) {
    <span class="keyword">var</span> activeMenuItem = <span class="keyword">this</span>.collection.findWhere({active: <span class="literal">true</span>});
    <span class="keyword">if</span> (activeMenuItem) activeMenuItem.set(<span class="string">'active'</span>, <span class="literal">false</span>);
    <span class="keyword">this</span>.collection.findWhere({name: menuItemName}).set(<span class="string">'active'</span>, <span class="literal">true</span>);
  },

  dataEvents: {
    <span class="string">'change:active collection'</span>: <span class="keyword">function</span>(model, active) { <span class="keyword">if</span> (active) <span class="keyword">this</span>.render(); }
  },

  afterRender: <span class="keyword">function</span>() {
    <span class="keyword">var</span> self = <span class="keyword">this</span>;
    <span class="keyword">this</span>.collection.each(<span class="keyword">function</span>(model) {
      self.attach(<span class="keyword">new</span> MenuItemView({model: model}));
    });
  }
});</code></pre>
<pre><code class="language-js">MenuItemView = Giraffe.View.extend({
  getHTML: <span class="keyword">function</span>() {
    <span class="keyword">var</span>
      name = <span class="keyword">this</span>.model.get(<span class="string">'name'</span>),
      href = <span class="keyword">this</span>.app.router.getRoute(<span class="string">'route:menu'</span>, name),
      className = <span class="keyword">this</span>.model.get(<span class="string">'active'</span>) ? <span class="string">'active'</span> : <span class="string">''</span>;
    <span class="keyword">return</span> <span class="string">'&lt;a href="'</span> + href + <span class="string">'" class="'</span> + className + <span class="string">'"&gt;'</span> + name+ <span class="string">'&lt;/a&gt;'</span>;
  }
});</code></pre>
<pre><code class="language-js">ContentView = Giraffe.View.extend({
  dataEvents: {
    <span class="string">'change:active collection'</span>: <span class="string">'onChangeActive'</span>
  },

  onChangeActive: <span class="keyword">function</span>(model, active) {
    <span class="keyword">if</span> (active) <span class="keyword">this</span>.render();
  },

  afterRender: <span class="keyword">function</span>() {
    <span class="keyword">var</span> activeMenuItem = <span class="keyword">this</span>.collection.findWhere({active: <span class="literal">true</span>});
    <span class="keyword">if</span> (activeMenuItem)
      <span class="keyword">this</span>.getItemView(activeMenuItem).attachTo(<span class="keyword">this</span>, {method: <span class="string">'html'</span>});
  },

  getItemView: <span class="keyword">function</span>(menuItem) {
    <span class="keyword">var</span> view = _.find(<span class="keyword">this</span>.children, <span class="keyword">function</span>(child) { <span class="keyword">return</span> child.model === menuItem; });
    <span class="keyword">if</span> (!view) {
      view = <span class="keyword">new</span> ContentItemView({
        model: menuItem,
        disposeOnDetach: <span class="literal">false</span>,
        saveScrollPosition: <span class="literal">true</span>
      });
    }
    <span class="keyword">return</span> view;
  }
});</code></pre>
<pre><code class="language-js">ContentItemView = Giraffe.View.extend({
  className: <span class="string">'content-item-view'</span>,

  getHTML: <span class="keyword">function</span>() {
    <span class="keyword">var</span> html = <span class="string">''</span>;
    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++)
      html += <span class="string">'&lt;p&gt;content for '</span> + <span class="keyword">this</span>.model.get(<span class="string">'name'</span>) + <span class="string">'&lt;/p&gt;'</span>;
    <span class="keyword">return</span> html;
  }
});</code></pre>
<p>All done!</p>
<pre><code class="language-js"><span class="keyword">var</span> app = <span class="keyword">new</span> App();
app.router = <span class="keyword">new</span> Giraffe.Router({
  triggers: {
    <span class="string">'menu/:name'</span>: <span class="string">'route:menu'</span>
  }
});
app.attachTo(<span class="string">'body'</span>);
Backbone.history.start();
app.router.cause(<span class="string">'route:menu'</span>, <span class="string">'menu item 1'</span>);</code></pre>
<h2>Try It</h2>
<div id="menuexample0_tabs" class="tabs">
  <ul>
    <li class="active">
  <a href="#menuexample0result-tab" rel="menuexample0result-tab">
    result
  </a>
</li><li>
  <a href="#menuexample0scriptjs-tab" rel="menuexample0scriptjs-tab">
    script.js
  </a>
</li><li>
  <a href="#menuexample0markuphtml-tab" rel="menuexample0markuphtml-tab">
    markup.html
  </a>
</li><li>
  <a href="#menuexample0stylecss-tab" rel="menuexample0stylecss-tab">
    style.css
  </a>
</li>
  </ul>
</div>
<div id="menuexample0_tabs_content" class="tabs_content">
  <div id="menuexample0result-tab" class="tab_content">
  <iframe id="menuexample0" src="_assets/menuexample0.html" class="result"></iframe>
</div><div id="menuexample0scriptjs-tab" class="tab_content">
  <pre><code class="language-js"><span class="keyword">var</span> App, MenuView, MenuItemView, ContentView, ContentItemView;

App = Giraffe.App.extend({
  initialize: <span class="keyword">function</span>() {
    <span class="keyword">this</span>.menuItems = <span class="keyword">new</span> Giraffe.Collection([
      {name: <span class="string">'menu item 1'</span>},
      {name: <span class="string">'menu item 2'</span>},
      {name: <span class="string">'menu item 3'</span>}
    ]);
  },

  afterRender: <span class="keyword">function</span>() {
    <span class="keyword">this</span>.attach(<span class="keyword">new</span> MenuView({collection: <span class="keyword">this</span>.menuItems}));
    <span class="keyword">this</span>.attach(<span class="keyword">new</span> ContentView({collection: <span class="keyword">this</span>.menuItems}));
  }
});

MenuView = Giraffe.View.extend({
  initialize: <span class="keyword">function</span>() {

  },

  appEvents: {
    <span class="string">'route:menu'</span>: <span class="string">'onRouteMenu'</span>
  },

  onRouteMenu: <span class="keyword">function</span>(menuItemName) {
    <span class="keyword">var</span> activeMenuItem = <span class="keyword">this</span>.collection.findWhere({active: <span class="literal">true</span>});
    <span class="keyword">if</span> (activeMenuItem) activeMenuItem.set(<span class="string">'active'</span>, <span class="literal">false</span>);
    <span class="keyword">this</span>.collection.findWhere({name: menuItemName}).set(<span class="string">'active'</span>, <span class="literal">true</span>);
  },

  dataEvents: {
    <span class="string">'change:active collection'</span>: <span class="keyword">function</span>(model, active) { <span class="keyword">if</span> (active) <span class="keyword">this</span>.render(); }
  },

  afterRender: <span class="keyword">function</span>() {
    <span class="keyword">var</span> self = <span class="keyword">this</span>;
    <span class="keyword">this</span>.collection.each(<span class="keyword">function</span>(model) {
      self.attach(<span class="keyword">new</span> MenuItemView({model: model}));
    });
  }
});

MenuItemView = Giraffe.View.extend({
  getHTML: <span class="keyword">function</span>() {
    <span class="keyword">var</span>
      name = <span class="keyword">this</span>.model.get(<span class="string">'name'</span>),
      href = <span class="keyword">this</span>.app.router.getRoute(<span class="string">'route:menu'</span>, name),
      className = <span class="keyword">this</span>.model.get(<span class="string">'active'</span>) ? <span class="string">'active'</span> : <span class="string">''</span>;
    <span class="keyword">return</span> <span class="string">'&lt;a href="'</span> + href + <span class="string">'" class="'</span> + className + <span class="string">'"&gt;'</span> + name+ <span class="string">'&lt;/a&gt;'</span>;
  }
});

ContentView = Giraffe.View.extend({
  dataEvents: {
    <span class="string">'change:active collection'</span>: <span class="string">'onChangeActive'</span>
  },

  onChangeActive: <span class="keyword">function</span>(model, active) {
    <span class="keyword">if</span> (active) <span class="keyword">this</span>.render();
  },

  afterRender: <span class="keyword">function</span>() {
    <span class="keyword">var</span> activeMenuItem = <span class="keyword">this</span>.collection.findWhere({active: <span class="literal">true</span>});
    <span class="keyword">if</span> (activeMenuItem)
      <span class="keyword">this</span>.getItemView(activeMenuItem).attachTo(<span class="keyword">this</span>, {method: <span class="string">'html'</span>});
  },

  getItemView: <span class="keyword">function</span>(menuItem) {
    <span class="keyword">var</span> view = _.find(<span class="keyword">this</span>.children, <span class="keyword">function</span>(child) { <span class="keyword">return</span> child.model === menuItem; });
    <span class="keyword">if</span> (!view) {
      view = <span class="keyword">new</span> ContentItemView({
        model: menuItem,
        disposeOnDetach: <span class="literal">false</span>,
        saveScrollPosition: <span class="literal">true</span>
      });
    }
    <span class="keyword">return</span> view;
  }
});

ContentItemView = Giraffe.View.extend({
  className: <span class="string">'content-item-view'</span>,

  getHTML: <span class="keyword">function</span>() {
    <span class="keyword">var</span> html = <span class="string">''</span>;
    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++)
      html += <span class="string">'&lt;p&gt;content for '</span> + <span class="keyword">this</span>.model.get(<span class="string">'name'</span>) + <span class="string">'&lt;/p&gt;'</span>;
    <span class="keyword">return</span> html;
  }
});

<span class="keyword">var</span> app = <span class="keyword">new</span> App();
app.router = <span class="keyword">new</span> Giraffe.Router({
  triggers: {
    <span class="string">'menu/:name'</span>: <span class="string">'route:menu'</span>
  }
});
app.attachTo(<span class="string">'body'</span>);
Backbone.history.start();
app.router.cause(<span class="string">'route:menu'</span>, <span class="string">'menu item 1'</span>);</code></pre>
</div><div id="menuexample0markuphtml-tab" class="tab_content">
  <pre><code class="language-html"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;<span class="title">html</span>&gt;</span>
  <span class="tag">&lt;<span class="title">head</span>&gt;</span>
    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">'stylesheet'</span> <span class="attribute">type</span>=<span class="value">'text/css'</span> <span class="attribute">href</span>=<span class="value">'menuexample0-style.css'</span> /&gt;</span>
  <span class="tag">&lt;/<span class="title">head</span>&gt;</span>
  <span class="tag">&lt;<span class="title">body</span>&gt;</span>
    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"http://code.jquery.com/jquery-1.9.1.min.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"http://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.0.0/backbone-min.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"../../backbone.giraffe.js"</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">'menuexample0-script.js'</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span>
</code></pre>
</div><div id="menuexample0stylecss-tab" class="tab_content">
  <pre><code class="language-css">/**
 * Eric Meyer's Reset CSS v2.0 (http://meyerweb.com/eric/tools/css/reset/)
 * http://cssreset.com
 */
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}table{border-collapse:collapse;border-spacing:0}

// Example
body {
  background-color: #ffffff;
  padding: 20px;
  font-size: 14px;
  font-family: Verdana, Geneva, sans-serif;
}
* {
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
h1 {
  font-size: 42px;
}
h2 {
  font-size: 24px;
  margin-bottom: 20px;
  display: inline;
  margin-right: 10px;
}
h3 {
  font-size: 18px;
  display: inline;
  margin-right: 10px;
}
.child-view {
  position: relative;
  padding: 20px;
  margin: 20px;
  border: 1px dashed #999;
}
.menu {
  padding-left: 80px;
}
.menu li {
  color: #888;
  display: inline-block;
  min-width: 80px;
  cursor: pointer;
  border: 1px solid transparent;
  text-align: center;
  border-top-left-radius: 4px;
  -moz-border-top-left-radius: 4px;
  -webkit-border-top-left-radius: 4px;
  border-top-right-radius: 4px;
  -moz-border-top-right-radius: 4px;
  -webkit-border-top-right-radius: 4px;
  padding: 4px;
  position: relative;
  top: 1px;
}
.menu li:active {
  color: #555;
}
.menu li.active {
  color: #333;
  border-color: #bbbbbb;
  border-bottom-color: #ffffff;
}
.menu-content {
  border: 1px solid #bbbbbb;
  padding: 20px;
  border-radius: 4px;
  -moz-border-radius: 4px;
  -webkit-border-radius: 4px;
}
.active {
  font-weight: bold;
}
.content-item-view {
  height: 200px;
  overflow: auto;
}</code></pre>
</div>
</div></div></p>

      </article>
    </div>
  </div>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
  <script src="_assets/tutdown.js"></script>
  <script>
  $(function() {
    $('.more-details').click(function() {
      $this = $(this);
      if ($this.hasClass('collapsed')) {
        $this.removeClass('collapsed');
        $this.addClass('uncollapsed');
      } else {
        $this.removeClass('uncollapsed');
        $this.addClass('collapsed');
      }
    });
  });
  </script>
</body>
</html>

